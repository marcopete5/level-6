<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Signup &amp; Login â€” Lesson</title>

        <!-- Shared stylesheet -->
        <link rel="stylesheet" href="../styles.css" />

        <!-- Prism theme (syntax colors) -->
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/prismjs@1/themes/prism.min.css" />

        <style>
            /* Accessibility touches */
            :focus {
                outline: 3px solid #2563eb;
                outline-offset: 2px;
            }
            .btn-primary {
                text-decoration: none;
                display: inline-block;
            }
            details summary {
                cursor: pointer;
                font-weight: 600;
            }
        </style>
    </head>
    <body>
        <main class="slide-container" aria-labelledby="page-title">
            <header class="slide-header">
                <h1 id="page-title">Signup &amp; Login</h1>
                <h2>Lesson</h2>
            </header>

            <div class="section" aria-labelledby="objectives-heading">
                <h3 id="objectives-heading">Learning Objectives</h3>
                <ul>
                    <li>
                        A student will be able to create a login and signup
                        function in the context file.
                    </li>
                    <li>
                        A student will be able to conditionally render two forms
                        for those functions.
                    </li>
                </ul>
            </div>

            <div class="section" aria-labelledby="lesson-video">
                <h3 id="lesson-video">Lesson</h3>
                <iframe
                    class="video-embed"
                    width="1184"
                    height="666"
                    src="https://www.youtube.com/embed/GNdqqzyBfQ4"
                    title="Signup & Login"
                    frameborder="0"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                    referrerpolicy="strict-origin-when-cross-origin"
                    allowfullscreen></iframe>
                <p>
                    <a
                        class="btn-primary"
                        href="https://youtu.be/GNdqqzyBfQ4"
                        target="_blank"
                        rel="noopener"
                        >Open in Browser</a
                    >
                </p>
            </div>

            <div class="section" aria-labelledby="impl-heading">
                <h3 id="impl-heading">
                    Implementing Signup and Login in a React App
                </h3>
                <p>
                    In this lesson, we will walk through the process of
                    implementing signup and login functionalities in a React
                    application. We will use asynchronous JavaScript
                    (async/await) and Axios for making HTTP requests to our
                    backend API. Let&#39;s break down the process and understand
                    how the frontend and backend interact to handle user
                    authentication.
                </p>
                <hr />
                <h3>Frontend: Making Signup and Login Requests</h3>

                <h4><strong>Signup Function:</strong></h4>
                <ul>
                    <li>
                        The <code>signup</code> function takes user credentials
                        as input.
                    </li>
                    <li>
                        It sends a POST request to the backend endpoint
                        <code>/api/auth/signup</code> with these credentials
                        using Axios.
                    </li>
                    <li>
                        If the request is successful, the response data (which
                        includes user details and a token) is logged to the
                        console.
                    </li>
                    <li>
                        If there is an error, it is caught and logged to the
                        console.
                    </li>
                </ul>

                <h4><strong>Login Function:</strong></h4>
                <ul>
                    <li>
                        The <code>login</code> function operates similarly to
                        the <code>signup</code> function.
                    </li>
                    <li>
                        It sends a POST request to
                        <code>/api/auth/login</code> with the user&#39;s
                        credentials.
                    </li>
                    <li>
                        On a successful request, the response data is logged to
                        the console.
                    </li>
                    <li>Any errors encountered are caught and logged.</li>
                </ul>

                <hr />
                <h3>Backend: Handling Signup and Login Requests</h3>

                <h4><strong>Signup Route (<code>/signup</code>):</strong></h4>
                <ul>
                    <li>
                        The backend first checks if the username provided in the
                        request already exists in the database.
                    </li>
                    <li>
                        If the username is taken, it responds with an error.
                    </li>
                    <li>
                        If the username is available, it creates a new user,
                        saves this user to the database, and generates a JSON
                        Web Token (JWT).
                    </li>
                    <li>
                        The response includes the newly created user and the
                        token.
                    </li>
                </ul>

                <h4><strong>Login Route (<code>/login</code>):</strong></h4>
                <ul>
                    <li>
                        The backend looks for a user with the given username.
                    </li>
                    <li>
                        If the username does not exist or the password is
                        incorrect, it responds with an error.
                    </li>
                    <li>
                        If the credentials are correct, it generates a JWT and
                        responds with the user details and the token.
                    </li>
                </ul>

                <hr />
                <h3>How They Work Together</h3>

                <h4><strong>Signup Process:</strong></h4>
                <ul>
                    <li>
                        A user provides their credentials on the signup form.
                    </li>
                    <li>
                        The <code>signup</code> function sends these credentials
                        to the backend.
                    </li>
                    <li>
                        The backend checks for the username&#39;s availability,
                        creates a new user if the username is available, and
                        returns user details along with a token.
                    </li>
                    <li>
                        The frontend logs this response, which can be used for
                        further actions like navigating to a different page or
                        storing the token for authentication purposes.
                    </li>
                </ul>

                <h4><strong>Login Process:</strong></h4>
                <ul>
                    <li>
                        A user provides their credentials on the login form.
                    </li>
                    <li>
                        The <code>login</code> function sends these credentials
                        to the backend.
                    </li>
                    <li>
                        The backend verifies the credentials. If valid, it
                        responds with user details and a token.
                    </li>
                    <li>
                        The frontend logs this response, similar to the signup
                        process.
                    </li>
                </ul>

                <hr />
                <h3>Conclusion</h3>
                <p>
                    By implementing the <code>signup</code> and
                    <code>login</code> functions on the frontend and connecting
                    them to the appropriate backend routes, we enable user
                    registration and authentication in our React app. This
                    lesson covers the crucial steps involved in setting up these
                    processes, providing a solid foundation for building secure
                    authentication mechanisms in your application.
                </p>
            </div>

            <div class="section">
                <details>
                    <summary style="font-size: 1.25rem; margin-bottom: 1rem">
                        Mongoose 6.12 Lesson
                    </summary>
                    <div aria-labelledby="mongoose-heading">
                        <iframe
                            class="video-embed"
                            width="1184"
                            height="666"
                            src="https://www.youtube.com/embed/frXNZ26OZlQ?list=PL1whVIy6oz7NIpURZoywfBtGH0dN_GafK"
                            title="Mongoose 6.12 Lesson"
                            frameborder="0"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                            referrerpolicy="strict-origin-when-cross-origin"
                            allowfullscreen></iframe>
                        <p>
                            <a
                                class="btn-primary"
                                href="https://www.youtube.com/watch?v=frXNZ26OZlQ&list=PL1whVIy6oz7NIpURZoywfBtGH0dN_GafK&index=14"
                                target="_blank"
                                rel="noopener"
                                >Open in Browser</a
                            >
                        </p>
                    </div>
                </details>
            </div>
        </main>

        <!-- Prism core -->
        <link
            rel="preload"
            href="https://cdn.jsdelivr.net/npm/prismjs@1/prism.min.js"
            as="script" />
        <script src="https://cdn.jsdelivr.net/npm/prismjs@1/prism.min.js"></script>

        <!-- Autoload languages based on language-xxxx class names -->
        <script
            src="https://cdn.jsdelivr.net/npm/prismjs@1/plugins/autoloader/prism-autoloader.min.js"
            data-autoloader-path="https://cdn.jsdelivr.net/npm/prismjs@1/components/"></script>

        <!-- Seed common components now; autoloader fetches others as needed -->
        <script src="https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-clike.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-javascript.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-jsx.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-bash.min.js"></script>

        <!-- Lesson entry (Level 6, Section FRONTEND_AUTH, Lesson 003) -->
        <script
            src="https://vschool-reports.netlify.app/ltp.js"
            data-api="https://vschool-reports.netlify.app"
            data-lesson-id="L6-FRONTEND_AUTH-003"
            data-lesson-title="Signup &amp; Login"
            data-course-id="Web Development"></script>

        <!-- Feedback form (no visible button included) -->
        <script
            src="https://vschool-reports.netlify.app/feedback.js"
            data-api="https://vschool-reports.netlify.app"
            data-lesson-id="L6-FRONTEND_AUTH-003"
            data-lesson-title="Signup &amp; Login"
            data-course-id="Web Development"
            data-button-selector="#myFeedbackBtn"></script>
    </body>
</html>
